<section class="section" id="warframe">
  <h2>Warframe</h2>
  <div class="tabs">
    <button class="tab active" data-tab="news">Новини</button>
    <button class="tab" data-tab="builds">Білди</button>
  </div>

  <div id="newsContent" class="content-container"></div>
  <div id="buildsContent" class="content-container" style="display:none"></div>

  <!-- Форма додавання контенту для адміністратора -->
  <div id="adminPanel" style="margin-top:20px;">
    <input type="text" id="contentTitle" placeholder="Заголовок">
    <textarea id="contentText" placeholder="Текст"></textarea>
    <input type="text" id="contentImg" placeholder="URL зображення">
    <button id="addContentBtn">Додати</button>
  </div>
</section>

<style>
.content-item { background: rgba(20,20,20,0.9); margin:10px; padding:10px; border:1px solid #f33; border-radius:6px; position:relative; }
.content-item img { max-width:100%; margin-bottom:5px; }
.editBtn, .delBtn { position:absolute; top:5px; cursor:pointer; padding:3px 6px; border-radius:4px; font-weight:bold; }
.editBtn { right:35px; background:#f90; color:#111; }
.delBtn { right:5px; background:#f33; color:#fff; }
</style>

<script>
// Tabs
const tabs = document.querySelectorAll('.tab');
const newsContent = document.getElementById('newsContent');
const buildsContent = document.getElementById('buildsContent');

tabs.forEach(tab=>{
  tab.addEventListener('click', ()=>{
    tabs.forEach(t=>t.classList.remove('active'));
    tab.classList.add('active');
    newsContent.style.display = tab.dataset.tab==='news'?'block':'none';
    buildsContent.style.display = tab.dataset.tab==='builds'?'block':'none';
  });
});

// Admin panel visible only for you
const isAdmin = true; // встанови true якщо ти авторизований адміністратор
if(!isAdmin){
  document.getElementById('adminPanel').style.display='none';
}

// Save & Load content
function saveContent(){
  const news = Array.from(newsContent.children).map(item=>({
    title:item.querySelector('strong')?.textContent||'',
    text:item.querySelector('p')?.textContent||'',
    img:item.querySelector('img')?.src||''
  }));
  const builds = Array.from(buildsContent.children).map(item=>({
    title:item.querySelector('strong')?.textContent||'',
    text:item.querySelector('p')?.textContent||'',
    img:item.querySelector('img')?.src||''
  }));
  localStorage.setItem('wfNews', JSON.stringify(news));
  localStorage.setItem('wfBuilds', JSON.stringify(builds));
}

function createContentItem(title,text,img){
  const div = document.createElement('div');
  div.classList.add('content-item');
  div.innerHTML = `${img?`<img src="${img}">`:''}<strong>${title}</strong><p>${text}</p>`;

  if(isAdmin){
    const editBtn = document.createElement('button');
    editBtn.className='editBtn';
    editBtn.textContent='✏️';
    editBtn.onclick = ()=>editContent(div);
    div.appendChild(editBtn);

    const delBtn = document.createElement('button');
    delBtn.className='delBtn';
    delBtn.textContent='❌';
    delBtn.onclick = ()=>{ div.remove(); saveContent(); };
    div.appendChild(delBtn);
  }

  return div;
}

function loadContent(){
  const newsData = JSON.parse(localStorage.getItem('wfNews')||'[]');
  const buildsData = JSON.parse(localStorage.getItem('wfBuilds')||'[]');

  newsContent.innerHTML = '';
  buildsContent.innerHTML = '';

  newsData.forEach(item=>newsContent.appendChild(createContentItem(item.title,item.text,item.img)));
  buildsData.forEach(item=>buildsContent.appendChild(createContentItem(item.title,item.text,item.img)));
}

// Add new content
document.getElementById('addContentBtn').addEventListener('click', ()=>{
  const title = document.getElementById('contentTitle').value;
  const text = document.getElementById('contentText').value;
  const img = document.getElementById('contentImg').value;

  const container = tabs[0].classList.contains('active') ? newsContent : buildsContent;
  container.appendChild(createContentItem(title,text,img));

  document.getElementById('contentTitle').value='';
  document.getElementById('contentText').value='';
  document.getElementById('contentImg').value='';

  saveContent();
});

// Edit content
function editContent(div){
  const title = prompt("Новий заголовок:", div.querySelector('strong')?.textContent);
  const text = prompt("Новий текст:", div.querySelector('p')?.textContent);
  const img = prompt("Новий URL зображення:", div.querySelector('img')?.src||'');

  if(title!==null) div.querySelector('strong').textContent=title;
  if(text!==null) div.querySelector('p').textContent=text;
  if(img!==null){
    if(div.querySelector('img')) div.querySelector('img').src=img;
    else if(img.trim()!==''){
      const newImg = document.createElement('img'); newImg.src=img; div.prepend(newImg);
    }
  }

  saveContent();
}

// Initial load
loadContent();
</script>
